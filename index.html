<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Validación de Certificados</title>
  <script>
    async function validarCertificado() {
      const urlParams = new URLSearchParams(window.location.search);
      const hash = urlParams.get("hash")?.trim();

      if (!hash) {
        document.getElementById("resultado").innerHTML = "⚠️ No se especificó ningún código.";
        return;
      }

      try {
        const response = await fetch('certificados_reestructurados.json');
        const data = await response.json();

        if (data[hash]) {
          const cert = data[hash];
          document.getElementById("resultado").innerHTML = `
            ✅ <b>Certificado Válido</b><br>
            <b>Nombre:</b> ${cert.nombre}<br>
            <b>Cédula:</b> ${cert.cedula}<br>
            <b>Curso:</b> ${cert.curso}<br>
            <b>Horas:</b> ${cert.horas}<br>
            <b>Estado:</b> ${cert.estado}<br>
            <b>Fechas:</b> ${cert.inicio} al ${cert.fin}<br>
            <b>Emitido el:</b> ${cert.emision}
          `;
        } else {
          document.getElementById("resultado").innerHTML = "❌ Certificado no encontrado.";
        }
      } catch (err) {
        document.getElementById("resultado").innerHTML = "❌ Error al cargar la base de datos.";
        console.error(err);
      }
    }

    window.onload = validarCertificado;
  </script>
</head>
<body>
  <h1>Validador de Certificados</h1>
  <div id="resultado">Cargando...</div>
</body>
</html>

